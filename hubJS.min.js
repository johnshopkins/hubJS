var hubJS=function(e,t){var n,r={version:0};return{userSettings:{},baseUrl:"http://api.hub.jhu.edu/",init:function(e){n=this;n.userSettings=t.extend({},r,e)},get:function(e,r,i){var r=t.extend({},r);r.v=n.userSettings.version;if(r.id){e=e+"/"+r.id;delete r.id}return t.ajax({url:n.baseUrl+e,dataType:"jsonP",data:r,success:i,error:n.userSettings.error})},articles:{find:function(e,r){var e=t.extend({},e);return n.get("articles",e,r)},recent:function(e,r){var e=t.extend({},e);return n.articles.find(e,r)},popular:function(e,r){var e=t.extend({},e,{order_by:"score",score:"trending"});return n.get("articles",e,r)},related:function(e,r,i){var s=r&&r.excluded_ids?e+","+r.excluded_ids:e,r=t.extend({},r,{excluded_ids:s}),o,u=n.articles.find({id:e}),a=u.then(function(e){var i=n.utility.extractEmbeddedItemIds(e,"tags"),s=t.extend({},r,{tags:i.join(",")});return n.articles.find(s)}),f=u.then(function(e){var i=n.utility.extractEmbeddedItemIds(e,"topics"),s=t.extend({},r,{topics:i.join(",")});return f=n.articles.find(s)});a.done(function(e){o=e._embedded.articles?"tags":"topics"});return o=="tags"?a.done(i):f.done(i)}},utility:{extractEmbeddedItemIds:function(e,t){var n=e&&e._embedded&&e._embedded[t]||[];return n.map(function(e){return e.id})}}}}(window,jQuery);