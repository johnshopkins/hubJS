var hubJS=function(e){var t,n={version:0};return{userSettings:{},baseUrl:"http://api.hub.jhu.edu/",init:function(e){t=this;t.userSettings=t.utility.extend({},n,e)},get:function(n,r){var r=t.utility.extend({},r);r.v=t.userSettings.version;if(r.id){n=n+"/"+r.id;delete r.id}return e.get({url:t.baseUrl+n,dataType:"jsonp",data:r})},articles:{find:function(e){var e=t.utility.extend({},e);return t.get("articles",e)},recent:function(e){var n={per_page:t.utility.isNumeric(e)?e:5};return t.articles.find(n)},popular:function(e){var e=t.utility.extend({},e,{order_by:"score",score:"trending"});return t.get("articles",e)},related:function(e,n){var r=new Deferred,i=n&&n.excluded_ids?e+","+n.excluded_ids:e,n=t.utility.extend({},n,{excluded_ids:i}),s=t.articles.find({id:e}),o,u=s.then(function(e){o=e;var r=t.utility.extractEmbeddedItemIds(o,"tags"),i=t.utility.extend({},n,{tags:r.join(",")});return t.articles.find(i)}).then(function(e){if(e._embedded.articles)return e;var r=t.utility.extractEmbeddedItemIds(o,"topics"),i=t.utility.extend({},n,{topics:r.join(",")});return t.articles.find(i)}).then(function(e){r.resolve(e)});return r.promise}},utility:{extractEmbeddedItemIds:function(e,t){var n=e&&e._embedded&&e._embedded[t]||[];return n.map(function(e,t){return e.id})},extend:function(){for(var e=1,t=arguments.length;e<t;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(arguments[0][n]=arguments[e][n]);return arguments[0]},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}}}(simplyAjax);